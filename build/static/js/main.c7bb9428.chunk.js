(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(10),l=n(11),u=n(14),i=n(12),o=n(15),c=n(0),s=n.n(c),m=n(13),f=n.n(m),h=n(2),d=n.n(h),v="/api/persons",p={getAll:function(){return d.a.get(v).then(function(e){return e.data})},create:function(e){return d.a.post(v,e).then(function(e){return e.data})},remove:function(e){return d.a.delete("".concat(v,"/").concat(e)).then(function(e){return e.data})},update:function(e){return console.log(e),d.a.put("".concat(v,"/").concat(e.id),e).then(function(e){return e.data})}},w=(n(41),function(e){var t=e.msg;return null===t?null:s.a.createElement("div",{className:"error"},t)}),N=function(e){return s.a.createElement("tr",null,s.a.createElement("td",null,e.info.name),s.a.createElement("td",null,e.info.number),s.a.createElement("td",null,s.a.createElement("button",{onClick:e.handleRemove},"poista")))},b=function(e){return s.a.createElement("div",null,"Rajaa n\xe4ytett\xe4vi\xe4: ",s.a.createElement("input",{value:e.filter,onChange:e.handleFilterChange}))},E=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).handleRemove=function(e){return function(){if(window.confirm("Poistetaanko ".concat(e.name,"?"))){p.remove(e.id);var t=n.state.persons.filter(function(t){return t.id!==e.id});n.setState({persons:t,msg:"Poistettiin ".concat(e.name)}),n.clearMsg()}}},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handleNewNumber=function(e){n.setState({newNumber:e.target.value})},n.handleNewName=function(e){n.setState({newName:e.target.value})},n.clearMsg=function(){setTimeout(function(){n.setState({msg:null})},4e3)},n.handleNameSubmit=function(e){if(e.preventDefault(),n.state.persons.find(function(e){return e.name===n.state.newName})){var t=n.state.persons.find(function(e){return e.name===n.state.newName}),r=Object(a.a)({},t,{number:n.state.newNumber});window.confirm("".concat(n.state.newName," on jo luettelossa, korvataanko vanha numero uudella?"))?p.update(r).then(function(e){var t=n.state.persons.filter(function(e){return e.id!==r.id}).concat(r);n.setState({persons:t,newName:"",newNumber:"",msg:"P\xe4ivitettiin ".concat(r.name)})}).catch(function(e){n.setState({msg:"Muutettavan henkil\xf6n ".concat(r.name," tiedot on jo poistettu")})}):n.setState({newName:"",newNumber:""}),n.clearMsg()}else{var l={name:n.state.newName,number:n.state.newNumber};p.create(l).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",msg:"Lis\xe4ttiin ".concat(l.name)})}),n.clearMsg()}},n.state={persons:[],filter:"",newName:"",newNumber:"",msg:null},n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;p.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){var e=this,t=""===this.state.filter?this.state.persons:this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter.toLowerCase())});return s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo"),s.a.createElement(w,{msg:this.state.msg}),s.a.createElement(b,{filter:this.state.filter,handleFilterChange:this.handleFilterChange}),s.a.createElement("form",{onSubmit:this.handleNameSubmit},s.a.createElement("div",null,"nimi: ",s.a.createElement("input",{value:this.state.newName,onChange:this.handleNewName})),s.a.createElement("div",null,"numero: ",s.a.createElement("input",{type:"number",value:this.state.newNumber,onChange:this.handleNewNumber})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))),s.a.createElement("h2",null,"Numerot"),s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null," Nimi "),s.a.createElement("th",null," Numero "))),s.a.createElement("tbody",null,t.map(function(t){return s.a.createElement(N,{key:t.name,info:t,handleRemove:e.handleRemove(t)})})))))}}]),t}(s.a.Component);f.a.render(s.a.createElement(E,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.c7bb9428.chunk.js.map